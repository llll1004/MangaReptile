webpackJsonp([1],{"/Vno":function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("7+uW"),o={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]};var r=e("VU/8")({name:"App"},o,!1,function(t){e("rLBN")},null,null).exports,l=e("/ocq"),s=e("mtWM"),i=e.n(s),c=e("zL8q"),d=e.n(c),g=null,p={name:"Main",created:function(){this.getSessionID()},data:function(){return{mangaForm:{targetSite:"1",targetUrl:""},mangaRules:{},ws:null,wsMsg:"",chapterData:[],mangaContent:[],chapterName:"",mangaName:"",downloadUrl:"",reptileType:"1",targetUrlHint:"章节地址"}},methods:{getSessionID:function(){var t=this,a="";i.a.get("http://localhost:8080/manga/connect").then(function(e){a=e.data.data,console.log(a),t.openWebSocket(a)})},openWebSocket:function(t){var a="ws://localhost:8080/websocket/"+t;this.ws=new WebSocket(a),this.ws.onopen=function(){console.log("尝试连接到服务器")},this.ws.onmessage=function(t){this.wsMsg=t.data,console.log(this.wsMsg),"wsMsg:"==t.data.substring(0,6)?g.setText(t.data.substring(6)):console.log(t.data.substring(0,6))}},crawlChapter:function(){var t=this;this.chapterData=[],this.chapterName="",this.mangaContent=[],this.mangaName="";var a=this;g=c.Loading.service({lock:!0,background:"rgba(0, 0, 0, 0.7)",text:"章节解析中..."}),i.a.get("http://localhost:8080/manga/detail",{params:{url:this.mangaForm.targetUrl}}).then(function(e){t.chapterData=e.data.data.images,t.chapterName=e.data.data.name,g.close(),t.successNotify(a,"成功","解析完毕")}).catch(function(e){console.log(e),g.close(),t.errorNotify(a,"错误","解析失败")})},crawlManga:function(){var t=this;this.chapterData=[],this.chapterName="",this.mangaContent=[],this.mangaName="";var a=this;g=c.Loading.service({lock:!0,background:"rgba(0, 0, 0, 0.7)",text:"漫画解析中..."}),i.a.get("http://localhost:8080/manga/chapters",{params:{url:this.mangaForm.targetUrl}}).then(function(e){t.mangaContent=e.data.data.chapters,t.mangaName=e.data.data.name,g.close(),t.successNotify(a,"成功","解析完毕")}).catch(function(e){console.log(e),g.close(),t.errorNotify(a,"错误","解析失败")})},downloadChapter:function(){var t=this,a=this;g=c.Loading.service({lock:!0,background:"rgba(0, 0, 0, 0.7)",text:"获取图片中..."}),i.a.get("http://localhost:8080/manga/downloadChapter",{params:{siteUrl:window.location.href.substring(0,window.location.href.length-2)}}).then(function(e){t.downloadUrl=e.data.data,t.downloadUrl=t.downloadUrl.replace(/\[/g,"%5B"),t.downloadUrl=t.downloadUrl.replace(/\]/g,"%5D"),g.close(),t.successNotify(a,"成功","打包成功"),window.open(t.downloadUrl,"_blank")}).catch(function(e){console.log(e),g.close(),t.errorNotify(a,"错误","获取失败")})},downloadManga:function(){var t=this,a=this;g=c.Loading.service({lock:!0,background:"rgba(0, 0, 0, 0.7)",text:"获取章节中..."}),i.a.get("http://localhost:8080/manga/downloadManga",{params:{siteUrl:window.location.href.substring(0,window.location.href.length-2)}}).then(function(e){t.downloadUrl=e.data.data,t.downloadUrl=t.downloadUrl.replace(/\[/g,"%5B"),t.downloadUrl=t.downloadUrl.replace(/\]/g,"%5D"),g.close(),t.successNotify(a,"成功","打包成功"),window.open(t.downloadUrl,"_blank")}).catch(function(e){console.log(e),g.close(),t.errorNotify(a,"错误","获取失败")})},reptileTypeChange:function(t){1==t?this.targetUrlHint="章节地址":2==t&&(this.targetUrlHint="漫画地址")},successNotify:function(t,a,e){t.$notify({title:a,message:e,type:"success"})},warningNotify:function(t,a,e){t.$notify({title:a,message:e,type:"warning"})},infoNotify:function(t,a,e){t.$notify.info({title:a,message:e})},errorNotify:function(t,a,e){t.$notify.error({title:a,message:e})}}},u={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main-div"},[e("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[e("el-card",{staticClass:"box-card main-card"},[e("el-form",{ref:"mangaForm",staticClass:"demo-border",attrs:{model:t.mangaForm,rules:t.mangaRules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"目标站点"}},[e("el-select",{attrs:{placeholder:"目标站点"},model:{value:t.mangaForm.targetSite,callback:function(a){t.$set(t.mangaForm,"targetSite",a)},expression:"mangaForm.targetSite"}},[e("el-option",{attrs:{label:"轻之国度",value:"1"}})],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"抓取方式"}},[e("el-radio-group",{on:{change:t.reptileTypeChange},model:{value:t.reptileType,callback:function(a){t.reptileType=a},expression:"reptileType"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v("章节")]),t._v(" "),e("el-radio-button",{attrs:{label:"2"}},[t._v("漫画")])],1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.targetUrlHint,prop:"targetUrl"}},[e("el-input",{model:{value:t.mangaForm.targetUrl,callback:function(a){t.$set(t.mangaForm,"targetUrl",a)},expression:"mangaForm.targetUrl"}})],1)],1),t._v(" "),e("div",{staticClass:"cmt-btn"},[1==t.reptileType?e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.crawlChapter}},[t._v("解析章节")]):t._e(),t._v(" "),2==t.reptileType?e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.crawlManga}},[t._v("解析漫画")]):t._e(),t._v(" "),1==t.reptileType?e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.downloadChapter}},[t._v("下载章节")]):t._e(),t._v(" "),2==t.reptileType?e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.downloadManga}},[t._v("下载漫画")]):t._e()],1),t._v(" "),e("h1",[t._v(t._s(t.chapterName))]),t._v(" "),t._l(t.chapterData,function(t){return e("div",{key:t,staticClass:"block"},[e("img",{attrs:{src:t,alt:""}})])}),t._v(" "),e("h1",[t._v(t._s(t.mangaName))]),t._v(" "),t._l(t.mangaContent,function(a){return e("div",{key:a.name},[e("h2",[t._v(t._s(a.name))])])})],2)],1)],1)},staticRenderFns:[]};var m=e("VU/8")(p,u,!1,function(t){e("/Vno")},"data-v-7be4b351",null).exports;n.default.use(l.a);var h=new l.a({routes:[{path:"/",name:"Index",component:m}]});e("tvR6");n.default.config.productionTip=!1,n.default.use(d.a),n.default.prototype.axios=i.a,new n.default({el:"#app",router:h,components:{App:r},template:"<App/>"})},rLBN:function(t,a){},tvR6:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.c6f7267c8c1d591d5346.js.map